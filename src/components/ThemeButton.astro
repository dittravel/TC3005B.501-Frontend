---
/**
 * ThemeButton
 * 
 * This component renders a button that allows users to toggle 
 * between light and dark themes.
 */

import MaterialIcon from "@components/MaterialIcon.astro";
---

<button
  id="theme-toggle"
  class="flex text-white cursor-pointer border-none bg-transparent p-0 hover:opacity-80 transition-opacity"
  aria-label="Toggle theme"
  title="Cambiar tema"
>
  <MaterialIcon icon="brightness_4" />
</button>

<script is:inline>
  const button = document.getElementById("theme-toggle");

  const applyTheme = (theme) => {
    if (theme === "dark") {
      document.documentElement.classList.add("dark");
    } else {
      document.documentElement.classList.remove("dark");
    }
  };

  // Load saved theme from localStorage on page load
  const savedTheme = localStorage.getItem("theme");
  if (savedTheme) {
    applyTheme(savedTheme);
  }

  button?.addEventListener("click", () => {
    const isDark = document.documentElement.classList.contains("dark");
    const newTheme = isDark ? "light" : "dark";

    applyTheme(newTheme);
    localStorage.setItem("theme", newTheme);
  });
</script>
